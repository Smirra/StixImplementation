using System.ComponentModel.DataAnnotations;
using Microsoft.EntityFrameworkCore;

namespace Vulnerabilities.Api.Models;
[Index(nameof(Id), IsUnique = true)]
[Index(nameof(Name), IsUnique = true)]
[Index(nameof(Created))]
[Index(nameof(Modified))]
[Index(nameof(MagnussonSeverity))]
[Index(nameof(Status))]
public class Vulnerability
{
    public Vulnerability()
    {
        Id ??= $"vulnerability--{Guid.NewGuid()}";
        Created ??= DateTime.Now;
        Modified ??= DateTime.Now;
    }

    // Required Common Properties
    public string? Type { get; set; }
    public string? SpecVersion { get; set; }
    [Key]
    public string? Id { get; set; }
    public DateTime? Created { get; set; }
    public DateTime? Modified { get; set; }

    /*

        Optional Common Properties ignore for this POC

    */

    // Vulnerability Specific Properties
    public string? Name { get; set; }
    public string? Description { get; set; }

    // Custom Properties
    public int? MagnussonSeverity { get; set; }

    public string? Status { get; set; }
}